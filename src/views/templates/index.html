<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UTOPIA WebApp</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/libs/bootstrap.min.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand">Utopia WebApp</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav w-100">
                    <li class="nav-item">
                        <a class="nav-link" id="mpp_btn" href="#" onclick="toggleOptions('mpp_container', this)">Microplastics Physical Properties</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="ec_btn" href="#" onclick="toggleOptions('ec_container', this)">Environmental Characteristics</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="mwp_btn" href="#" onclick="toggleOptions('mwp_container', this)">Microplastics Weathering Properties</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="es_btn" href="#" onclick="toggleOptions('es_container', this)">Emission Scenario</a>
                    </li>
                    <li class="nav-item">
                        <button id="run-model" class="btn btn-success">Run Model</button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>        
        <!-- The div for the content to be toggled -->
            <div class="container" id="input_variables_container">
                <div id="mpp_container" class="toggle_container">
                    <div class="col-md-8 d-flex justify-content-between align-items-center">
                        <h3>Microplastics Physical Properties</h3>
                        <i class="fas fa-info-circle info-icon" data-toggle="tooltip" data-placement="right" title="..."></i>
                    </div>
                    <div class="row">
                        <label for="mpp_composition" class="col-md-4">Microplastics Physical Property Composition:</label>
                        <select id="mpp_composition" class="col-md-3" onchange="generateMaterialProperties()">
                            <option value="PVC">PVC</option>
                            <option value="PE">PE</option>
                            <option value="PA">PA</option>
                        </select>
                    </div>
                    <div id="materialProperties">
                    <!-- will be dynamically generated -->
                    </div>
                </div>
                <div id="ec_container" class="toggle_container">
                    <div class="col-md-8 d-flex justify-content-between align-items-center">
                        <h3>Environmental Characteristics</h3>
                        <i class="fas fa-info-circle info-icon" data-toggle="tooltip" data-placement="right" title="..."></i>
                    </div>
                        {# TODO currently just commented out -> remove later #}
{#                        <div class="row">#}
{#                            <label class="col-md-4" for="spmDiameter">SPM Diameter (µm):</label>#}
{#                            <input class="col-md-3" type="number" id="spmDiameter" value="0.5" min="0.1" step="0.1">#}
{#                        </div>#}
{#                        <div class="row">#}
{#                            <label class="col-md-4" for="spmDensity">SPM Density (kg/m³):</label>#}
{#                            <input class="col-md-3" type="number" id="spmDensity" value="2000">#}
{#                        </div>#}
                        <div class="row">
                            <label class="col-md-4">Compartments Properties:</label>
                            <button class="col-md-3">Edit File</button>
                        </div>
                </div>
                <div id="mwp_container" class="toggle_container">
                    <div class="col-md-8 d-flex justify-content-between align-items-center">
                        <h3>Weathering Properties</h3>
                        <i class="fas fa-info-circle info-icon" data-toggle="tooltip" data-placement="right" title="..."></i>
                    </div>
                    <div class="row">
                        <label class="col-md-4" for="fragmentation_style">Fragmentation Style:</label>
                        <select class="col-md-3" id="fragmentation_style" onchange="changeFragmentationStyle()">
                            <option value="sequential_fragmentation">Sequential</option>
                            <option value="erosive_fragmentation">Erosive</option>
                            <option value="mixed_fragmentation">Mixed</option>
                            <option value="no_fragmentation">No Fragmentation</option>
                        </select>
                    </div>
                    <div class="row">
                        <label class="col-md-4">Process Input Parameters</label>
                        <label class="col-md-3">TBD</label>
                    </div>
                </div>
                <div id="es_container" class="toggle_container">
                    <div class="col-md-8 d-flex justify-content-between align-items-center">
                        <h3>Emission Scenario</h3>
                        <i class="fas fa-info-circle info-icon" data-toggle="tooltip" data-placement="right" title="..."></i>
                    </div>
                    <div class="row">
                        <label class="col-md-4" for="mp_form">MP Form:</label>
                        <select class="col-md-3" id="mp_form">
                            <option value="freeMP">Free</option>
                            <option value="heterMP">Heter</option>
                            <option value="biofMP">Biof</option>
                            <option value="heterBiofMP">HeterBiof</option>
                        </select>
                    </div>
                    <div class="row">
                        <label class="col-md-4" for="es_bin_size">Size Bin:</label>
                        <select class="col-md-3" id="es_bin_size">
                            <option value="a">0.5 µm</option>
                            <option value="b">5 µm</option>
                            <option value="c">50 µm</option>
                            <option value="d">500 µm</option>
                            <option value="e">5000 µm</option>
                        </select>
                    </div>
                    <div class="row">
                        <label class="col-md-4" for="input_flow_g_s">Flow of MPs (g/s):</label>
                        <input class="col-md-3" type="number" id="input_flow_g_s" value="1" minlength="1">
                    </div>
                    <div class="row">
                        <label class="col-md-4" for="emiss_comp">Receiving Compartment:</label>
                        <select class="col-md-3" id="emiss_comp">
                            <option value="Ocean_Surface_Water">Ocean Surface Water</option>
                            <option value="Ocean_Mixed_Water">Ocean Mixed Water</option>
                            <option value="Ocean_Column_Water">Ocean Column Water</option>
                            <option value="Coast_Surface_Water">Coast Surface Water</option>
                            <option value="Coast_Column_Water">Coast Column Water</option>
                            <option value="Surface_Freshwater">Surface Freshwater</option>
                            <option value="Bulk_Freshwater">Bulk Freshwater</option>
                            <option value="Sediment_Freshwater">Sediment Freshwater</option>
                            <option value="Sediment_Ocean">Sediment Ocean</option>
                            <option value="Sediment_Coast">Sediment Coast</option>
                            <option value="Beaches_Soil_Surface">Beach Surface</option>
                            <option value="Beaches_Deep_Soil">Beach Subsurface</option>
                            <option value="Background_Soil_Surface">Background Soil Surface</option>
                            <option value="Background_Soil">Background Soil</option>
                            <option value="Impacted_Soil_Surface">Impacted Soil Surface</option>
                            <option value="Impacted_Soil">Impacted Soil</option>
                            <option value="Air">Air</option>
                        </select>
                    </div>
                </div>
            </div>
    <div id="loading-spinner" class="spinner" style="display: none;">
        <!-- You can use any loading spinner markup here. -->
        <div class="loader"></div>
    </div>
        <!--Visualizations container-->
            <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
                <div class="container-fluid">
                    <a class="navbar-brand">Visualizations</a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav w-100">
{#                            TODO currently just commented out -> remove later#}
{#                            <li class="nav-item">#}
{#                                <a class="nav-link active" id="mass_fraction_distribution_btn" href="#" onclick="">Mass Fraction Distribution</a>#}
{#                            </li>#}
{#                            <li class="nav-item">#}
{#                                <a class="nav-link active" id="number_fraction_distribution_btn" href="#" onclick="">Number Fraction Distribution</a>#}
{#                            </li>#}
                            <li class="nav-item">
                                <a class="nav-link" id="comp_mass_fraction_distribution_btn" href="#" onclick="">Mass Fraction Distribution</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="comp_number_fraction_distribution_btn" href="#" onclick="">Number Fraction Distribution</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>

        <!-- Heatmap container -->
            <div class="mt-5" id="main-content">
                <div class="col" id="master-column">
                    <div class="">
                        <div id="heatmap-container" class="text-center">
                            <!-- Centered heatmap container -->
                        </div>
                    </div>
                    <div id="legend-container">
                        <!-- Heatmap legend container -->
                    </div>
                    <div class="info-containers">
                        <div id="model-run-container">
                            <div class="detailed-info-column" >
                                <!-- Model Run information container -->
                                <t class="detailed-title">Model Run:</t>
                                <div class="inner-detail-container" id="model-run-input"></div>
                            </div>
                        </div>
                        <div id="detailed-view-cell" class="detailed-views">
                            <!-- Detailed information container -->
                            <div class="detailed-info-column" id="detailed-info-column1">
                                <div id="cell-title"  class="selection-title">Something something</div>
                                <div class="inner-detail-container-general">
                                    <div id="cell-info-percentage"></div>
                                    <div id="total-percent"></div>
                                    <div id="residence-value"></div>
                                    <div id="persistence-value"></div>
                                </div>
                                <div class="inner-detail-container" style="border-top: 1px solid black;">
                                    <div class="param-container">
                                        <div class="param-value-left bold"></div>
                                        <div class="param-value bold">Rate (g/s)</div>
                                        <div class="param-value bold">Total</div>
                                        <div class="param-value bold">%</div>
                                    </div>
                                </div>
                                <div class="detail-container">
                                    <div class="param-container">
                                        <div class="param-value-left bold">Inflows</div>
                                        <div class="param-value"></div>
                                        <div class="param-value bold" id="total-inflow"></div>
                                        <div class="param-value"></div>
                                    </div>
                                </div>
                                <div class="inner-detail-container" id="inflows-container">
                                </div>
                                <div class="detail-container">
                                    <div class="param-container">
                                        <div class="param-value-left bold">Outflows</div>
                                        <div class="param-value"></div>
                                        <div class="param-value bold" id="total-outflow"></div>
                                        <div class="param-value"></div>
                                    </div>

                                </div>
                                <div class="inner-detail-container" id="outflows-container">
                                </div>
                            </div>
                        </div>
                        <div id="detailed-view-compartment" class="detailed-views">
                            <!-- Detailed information container -->
                            <div class="detailed-info-column">
                                <div id="compartment-title" class="selection-title">Something something</div>
                                <div class="inner-detail-container-general">
                                    <div id="cell-info-compartment"></div>
                                </div>
<!--                                <div class="inner-detail-container" style="border-top: 1px solid black;">-->
<!--                                    <div class="param-container">-->
<!--                                        <div class="param-name"></div>-->
<!--                                        <div class="param-name">Rate (g/s)</div>-->
<!--                                        <div class="param-name">Total</div>-->
<!--                                        <div class="param-name">%</div>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                                <div class="detail-container">-->
<!--                                    <t class="detailed-title">Inflows</t>-->
<!--                                </div>-->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        
    <script src="{{ url_for('static', filename='js/libs/bootstrap.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/libs/d3.v7.js') }}"></script>
    <script src="{{ url_for('static', filename='js/main-elements.js') }}"></script>
    <script src="{{ url_for('static', filename='js/d3-heatmap.js') }}"></script>

</body>

</html>